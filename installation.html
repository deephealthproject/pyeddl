

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Installation &mdash; PyEDDL  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting Started" href="getting_started.html" />
    <link rel="prev" title="Welcome to PyEDDL’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> PyEDDL
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-eddl-dependencies">Install EDDL dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-eddl">Install EDDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-pyeddl">Install PyEDDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="#disabling-unwanted-modules">Disabling unwanted modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#eddl-installed-in-an-arbitrary-directory">EDDL installed in an arbitrary directory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/utils.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyeddl.utils</span></code> — Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/eddl.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyeddl.eddl</span></code> — eddl API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/tensor.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyeddl.tensor</span></code> — Tensor</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PyEDDL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/installation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<span id="id1"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>The easiest way to install PyEDDL is via <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">dhealth</span> <span class="n">pyeddl</span><span class="o">-</span><span class="n">cpu</span>  <span class="c1"># cpu-only version</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">dhealth</span> <span class="n">pyeddl</span><span class="o">-</span><span class="n">gpu</span>  <span class="c1"># gpu-enabled version</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="o">-</span><span class="n">c</span> <span class="n">dhealth</span> <span class="n">pyeddl</span><span class="o">-</span><span class="n">cudnn</span>  <span class="c1"># cudnn-enabled version</span>
</pre></div>
</div>
<p>Each PyEDDL package installs the corresponding EDDL one as a dependency. So
there’s no need to separately install EDDL when installing via Conda.</p>
<p>Note that the highest version available from Conda might be less than the
latest version on PyPI for recent releases.</p>
<p>If you prefer to build and install from source instead, read on.</p>
<p>To install PyEDDL from source, you need to install EDDL first. Installation
instructions for EDDL are available as part of the <a class="reference external" href="https://deephealthproject.github.io/eddl/">EDDL docs</a>. However, here we provide
instructions on how to install PyEDDL including EDDL. You can refer to the
EDDL docs if you need more details.</p>
<p>Some EDDL components are optional. By default, PyEDDL assumes that EDDL has
been installed with ONNX support. Also, EDDL can be compiled for CPU only or
with GPU support. You can build PyEDDL in both cases, with some differences
that will be highlighted further ahead.</p>
<p>Each PyEDDL version depends on a specific EDDL version. If you are installing
from the GitHub repo, the correct version of EDDL is available from the
submodule (<code class="docutils literal notranslate"><span class="pre">third_party</span></code> dir).</p>
<p>The following sections contain instructions to install PyEDDL from scratch,
EDDL installation included. We use Ubuntu Linux as an example platform.</p>
<div class="section" id="install-eddl-dependencies">
<h2>Install EDDL dependencies<a class="headerlink" href="#install-eddl-dependencies" title="Permalink to this headline">¶</a></h2>
<p>EDDL needs the development versions of the zlib and Eigen3 libraries. To
enable ONNX I/O, you also need to install Google protobuf. On Ubuntu, for
instance, install the following with APT: <code class="docutils literal notranslate"><span class="pre">build-essential,</span> <span class="pre">zlib1g-dev,</span>
<span class="pre">libeigen3-dev,</span> <span class="pre">wget,</span> <span class="pre">ca-certificates</span></code>. Install protobuf from source:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>wget -q https://github.com/protocolbuffers/protobuf/releases/download/v3.11.4/protobuf-all-3.11.4.tar.gz
tar xf protobuf-all-3.11.4.tar.gz
cd protobuf-3.11.4
./configure
make -j$(nproc)
make install
</pre></div>
</div>
<p>If you want to compile EDDL for <strong>GPU</strong>, you also need the CUDA toolkit
(<code class="docutils literal notranslate"><span class="pre">nvidia-cuda-toolkit</span></code>). In this case, <a class="reference external" href="https://devtalk.nvidia.com/default/topic/1026622/nvcc-can-t-compile-code-that-uses-eigen">you also need a recent version of
Eigen3</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>PyEDDL is part of the <a class="reference external" href="https://github.com/deephealthproject">DeepHealth ecosystem</a>. If you plan to use PyEDDL with
other DeepHealth components, you should make sure that your environment
satisfies the requirements of all such components. In particular, <a class="reference external" href="https://github.com/deephealthproject/ecvl">ECVL</a> needs a compiler with support
for C++ 17. Being a set of bindings for ECVL,
<a class="reference external" href="https://github.com/deephealthproject/pyecvl">PyECVL</a> also needs a C++ 17
compiler. Since all components need to be built with the same compiler to
work together, if you want to use PyEDDL together with PyECVL, you need to
compile everything with the same C++ 17 compiler. See the <a class="reference external" href="https://deephealthproject.github.io/pyecvl">PyECVL docs</a> for an example of PyECVL +
PyEDDL installation.</p>
</div>
</div>
<div class="section" id="install-eddl">
<h2>Install EDDL<a class="headerlink" href="#install-eddl" title="Permalink to this headline">¶</a></h2>
<p>Clone the PyEDDL GitHub repo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="o">--</span><span class="n">recurse</span><span class="o">-</span><span class="n">submodules</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">deephealthproject</span><span class="o">/</span><span class="n">pyeddl</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">pyeddl</span>
</pre></div>
</div>
<p>Install EDDL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pushd third_party/eddl
mkdir build
pushd build
cmake -D BUILD_SHARED_LIB=ON -D BUILD_PROTOBUF=ON -D BUILD_TESTS=OFF
make -j$(nproc)
make install
popd
popd
</pre></div>
</div>
<p>To compile for <strong>GPU</strong>, add <code class="docutils literal notranslate"><span class="pre">-D</span> <span class="pre">BUILD_TARGET=GPU</span></code> to the cmake flags.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>EDDL versions 0.3 and 0.3.1 are affected by an issue that breaks the
building of the shared library. To work around this, you can patch the
EDDL code with <code class="docutils literal notranslate"><span class="pre">eddl_0.3.patch</span></code> (at the top level in the PyEDDL git
repository).</p>
</div>
</div>
<div class="section" id="install-pyeddl">
<h2>Install PyEDDL<a class="headerlink" href="#install-pyeddl" title="Permalink to this headline">¶</a></h2>
<p>You need the development version of python3 and pip. On Ubuntu, install
<code class="docutils literal notranslate"><span class="pre">python3-dev</span></code> and <code class="docutils literal notranslate"><span class="pre">python3-pip</span></code>.</p>
<p>Install the Python dependencies. Note that, at the moment, the pybind11
version needs to be less than 2.6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">setuptools</span> <span class="n">pip</span>
<span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">numpy</span> <span class="s1">&#39;pybind11&lt;2.6&#39;</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The EDDL code includes Eigen headers like in this example: <code class="docutils literal notranslate"><span class="pre">#include</span>
<span class="pre">&lt;Eigen/Dense&gt;</span></code>, e.g., with <code class="docutils literal notranslate"><span class="pre">Eigen</span></code> as the root directory. However, Eigen
installations usually have the header rooted at <code class="docutils literal notranslate"><span class="pre">eigen3</span></code> (for instance, the
apt installation places them in <code class="docutils literal notranslate"><span class="pre">/usr/include/eigen3</span></code>). To work around this
you can either add a symlink or set <code class="docutils literal notranslate"><span class="pre">CPATH</span></code>, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">CPATH</span><span class="o">=</span><span class="s2">&quot;/usr/include/eigen3:$</span><span class="si">{CPATH}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Install pyeddl:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>Alternatively, in the case of tagged releases, you can also install PyEDDL
with pip. The following table shows the required EDDL version for each PyEDDL
version:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 53%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>PyEDDL version</p></th>
<th class="head"><p>EDDL version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0.1.0</p></td>
<td><p>0.2.2</p></td>
</tr>
<tr class="row-odd"><td><p>0.2.0</p></td>
<td><p>0.3</p></td>
</tr>
<tr class="row-even"><td><p>0.3.0</p></td>
<td><p>0.3.1</p></td>
</tr>
<tr class="row-odd"><td><p>0.4.0</p></td>
<td><p>0.4.2</p></td>
</tr>
<tr class="row-even"><td><p>0.5.0</p></td>
<td><p>0.4.3</p></td>
</tr>
<tr class="row-odd"><td><p>0.6.0</p></td>
<td><p>0.4.4</p></td>
</tr>
<tr class="row-even"><td><p>0.7.*</p></td>
<td><p>0.5.4a</p></td>
</tr>
<tr class="row-odd"><td><p>0.8.*</p></td>
<td><p>0.6.0</p></td>
</tr>
<tr class="row-even"><td><p>0.9.*</p></td>
<td><p>0.7.1</p></td>
</tr>
<tr class="row-odd"><td><p>0.10.*</p></td>
<td><p>0.8a</p></td>
</tr>
<tr class="row-even"><td><p>0.11.*</p></td>
<td><p>0.8.1a</p></td>
</tr>
<tr class="row-odd"><td><p>0.12.*</p></td>
<td><p>0.8.3a</p></td>
</tr>
<tr class="row-even"><td><p>0.13.*</p></td>
<td><p>0.9.1b</p></td>
</tr>
<tr class="row-odd"><td><p>0.14.*</p></td>
<td><p>0.9.2b</p></td>
</tr>
</tbody>
</table>
<p>To install, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">pyeddl</span>
</pre></div>
</div>
<p>If EDDL was compiled for <strong>GPU</strong>, you need to export the <code class="docutils literal notranslate"><span class="pre">EDDL_WITH_CUDA</span></code>
environment variable <strong>before installing PyEDDL</strong> so that <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> will
also link the <code class="docutils literal notranslate"><span class="pre">cudart</span></code>, <code class="docutils literal notranslate"><span class="pre">cublas</span></code> and <code class="docutils literal notranslate"><span class="pre">curand</span></code> libraries. These will be
expected in “standard” system locations, so you might need to create symlinks
depending on your CUDA toolkit installation. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">EDDL_WITH_CUDA</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">cuda</span><span class="o">-</span><span class="mf">10.1</span><span class="o">/</span><span class="n">targets</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">linux</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libcudart</span><span class="o">.</span><span class="n">so</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">cuda</span><span class="o">-</span><span class="mf">10.1</span><span class="o">/</span><span class="n">targets</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">linux</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libcurand</span><span class="o">.</span><span class="n">so</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">cuda</span><span class="o">-</span><span class="mf">10.1</span><span class="o">/</span><span class="n">targets</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">linux</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libcublas</span><span class="o">.</span><span class="n">so</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span>
</pre></div>
</div>
</div>
<div class="section" id="disabling-unwanted-modules">
<h2>Disabling unwanted modules<a class="headerlink" href="#disabling-unwanted-modules" title="Permalink to this headline">¶</a></h2>
<p>By default, PyEDDL assumes a complete EDDL installation, including optional
modules, and builds bindings for all of them. You can disable support for
specific modules via environment variables. For instance, suppose you
installed EDDL without protobuf support: by default, PyEDDL will try to build
the bindings for protobuf-specific EDDL tools (ONNX support). To avoid this,
set the <code class="docutils literal notranslate"><span class="pre">EDDL_WITH_PROTOBUF</span></code> environment variable to <code class="docutils literal notranslate"><span class="pre">OFF</span></code> (or <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>)
before building PyEDDL.</p>
</div>
<div class="section" id="eddl-installed-in-an-arbitrary-directory">
<h2>EDDL installed in an arbitrary directory<a class="headerlink" href="#eddl-installed-in-an-arbitrary-directory" title="Permalink to this headline">¶</a></h2>
<p>The above installation instructions assume installation in standard system
paths (such as <code class="docutils literal notranslate"><span class="pre">/usr/local/include</span></code>, <code class="docutils literal notranslate"><span class="pre">/usr/local/lib</span></code>). However, EDDL can
be installed in an arbitrary directory, for instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">third_party</span><span class="o">/</span><span class="n">eddl</span>
<span class="n">mkdir</span> <span class="n">build</span>
<span class="n">cd</span> <span class="n">build</span>
<span class="n">cmake</span> <span class="o">-</span><span class="n">D</span> <span class="n">BUILD_SHARED_LIB</span><span class="o">=</span><span class="n">ON</span> <span class="o">-</span><span class="n">D</span> <span class="n">BUILD_PROTOBUF</span><span class="o">=</span><span class="n">ON</span> <span class="o">-</span><span class="n">DCMAKE_INSTALL_PREFIX</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span><span class="o">/</span><span class="n">eddl</span> <span class="o">..</span>
<span class="n">make</span>
<span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>You can tell the PyEDDL setup script about this via the EDDL_DIR environment
variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">EDDL_DIR</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span><span class="o">/</span><span class="n">eddl</span>
<span class="n">python3</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>In this way, <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> will look for additional include files in
<code class="docutils literal notranslate"><span class="pre">/home/myuser/eddl/include</span></code> and for additional libraries in
<code class="docutils literal notranslate"><span class="pre">/home/myuser/eddl/lib</span></code>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="getting_started.html" class="btn btn-neutral float-right" title="Getting Started" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to PyEDDL’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019-2021, CRS4.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>